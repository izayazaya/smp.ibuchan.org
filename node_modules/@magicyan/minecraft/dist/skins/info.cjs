'use strict';

const api = require('../constants/api.cjs');
require('lodash');

async function fetchSkinInfo(nickOrUIID) {
  if (typeof nickOrUIID !== "string") {
    throw new Error(`The nickOrUIID parameter expected the string type but received ${typeof nickOrUIID}`);
  }
  const url = `${api.RouteBases.skins}/info/user/${nickOrUIID}`;
  const response = await fetch(url);
  if (!response.ok) {
    const { statusText, status } = response;
    return { success: false, error: statusText, code: status };
  }
  try {
    const data = await response.json();
    return {
      success: true,
      data
    };
  } catch (err) {
    return { success: false, error: `${err}`, code: 502 };
  }
}

exports.fetchSkinInfo = fetchSkinInfo;
